<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Juego de Geografía - Países y Capitales</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #60a5fa 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .game-container {
      width: 100%;
      max-width: 1200px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 30px;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 2.5rem;
      color: #2d3748;
      margin-bottom: 20px;
      font-weight: 700;
    }

    .game-info {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
    }

    .score-display, .timer-display {
      font-size: 1.3rem;
      font-weight: 600;
      color: #4a5568;
      padding: 12px 24px;
      background: #edf2f7;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .score-display span, .timer-display span {
      color: #2563eb;
      font-weight: 700;
    }

    .instructions {
      text-align: center;
      margin-bottom: 25px;
      font-size: 1.1rem;
      color: #4a5568;
    }

    .game-area {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 20px;
    }

    .countries-column h2, .capitals-column h2 {
      font-size: 1.5rem;
      color: #2d3748;
      margin-bottom: 20px;
      text-align: center;
      font-weight: 600;
    }

    .items-list, .drop-zones {
      display: flex;
      flex-direction: column;
      gap: 12px;
      min-height: 400px;
    }

    .country-item {
      background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
      color: white;
      padding: 16px 20px;
      border-radius: 12px;
      cursor: grab;
      font-weight: 600;
      font-size: 1.05rem;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
      transition: all 0.3s ease;
      user-select: none;
    }

    .country-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
    }

    .country-item:active {
      cursor: grabbing;
    }

    .country-item.dragging {
      opacity: 0.5;
      cursor: grabbing;
    }

    .drop-zone {
      background: #f7fafc;
      border: 3px dashed #cbd5e0;
      border-radius: 12px;
      padding: 16px 20px;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: #4a5568;
      font-size: 1.05rem;
      transition: all 0.3s ease;
    }

    .drop-zone.drag-over {
      background: #e6fffa;
      border-color: #38b2ac;
      transform: scale(1.02);
      box-shadow: 0 4px 12px rgba(56, 178, 172, 0.2);
    }

    .drop-zone.correct {
      background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
      color: white;
      border-style: solid;
      animation: correctPulse 0.5s ease;
    }

    .drop-zone.incorrect {
      background: linear-gradient(135deg, #fc8181 0%, #f56565 100%);
      color: white;
      border-style: solid;
      animation: shake 0.5s ease;
    }

    @keyframes correctPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }

    .hidden {
      display: none !important;
    }

    .game-over-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.98);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 20px;
    }

    .game-over-content {
      text-align: center;
      padding: 40px;
      max-width: 500px;
    }

    .game-over-content h2 {
      font-size: 2.5rem;
      color: #2d3748;
      margin-bottom: 20px;
    }

    .final-score {
      font-size: 1.3rem;
      color: #4a5568;
      margin-bottom: 15px;
    }

    .final-score span {
      color: #2563eb;
      font-weight: 700;
      font-size: 1.5rem;
    }

    .btn-primary {
      padding: 14px 32px;
      font-size: 1.1rem;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
      margin: 8px;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
    }

    @media (max-width: 768px) {
      .game-area {
        grid-template-columns: 1fr;
      }
      .header h1 {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body>
  <div class="game-container">
    <div class="header">
      <h1>Empareja Países con sus Capitales</h1>
      <div class="game-info">
        <div class="score-display">Puntos: <span id="score">0</span></div>
        <div class="timer-display">Tiempo: <span id="timer">60</span>s</div>
      </div>
    </div>

    <div id="game-screen">
      <div class="instructions">
        <p>¡Arrastra cada país a su capital correspondiente!</p>
      </div>

      <div class="game-area">
        <div class="countries-column">
          <h2>Países</h2>
          <div id="countries-list" class="items-list"></div>
        </div>

        <div class="capitals-column">
          <h2>Capitales</h2>
          <div id="capitals-list" class="drop-zones"></div>
        </div>
      </div>
    </div>

    <div id="game-over-screen" class="game-over-screen hidden">
      <div class="game-over-content">
        <h2>¡Juego Terminado!</h2>
        <p class="final-score">Tu Puntuación: <span id="final-score">0</span></p>
        <button id="play-again" class="btn-primary">Jugar Otra Vez</button>
      </div>
    </div>
  </div>

  <script>
    const gameData = [
      { country: 'Francia', capital: 'París' },
      { country: 'Alemania', capital: 'Berlín' },
      { country: 'Italia', capital: 'Roma' },
      { country: 'España', capital: 'Madrid' },
      { country: 'Portugal', capital: 'Lisboa' },
      { country: 'Reino Unido', capital: 'Londres' },
      { country: 'Grecia', capital: 'Atenas' },
      { country: 'Países Bajos', capital: 'Ámsterdam' },
      { country: 'Bélgica', capital: 'Bruselas' },
      { country: 'Austria', capital: 'Viena' }
    ];

    let draggedElement = null;
    let score = 0;
    let timeRemaining = 60;
    let matchedCount = 0;
    let correctAnswers = {};
    let timerInterval = null;

    const elements = {
      score: document.getElementById('score'),
      timer: document.getElementById('timer'),
      countriesList: document.getElementById('countries-list'),
      capitalsList: document.getElementById('capitals-list'),
      gameScreen: document.getElementById('game-screen'),
      gameOverScreen: document.getElementById('game-over-screen'),
      finalScore: document.getElementById('final-score'),
      playAgain: document.getElementById('play-again')
    };

    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function initializeGame() {
      score = 0;
      timeRemaining = 60;
      matchedCount = 0;
      correctAnswers = {};

      clearInterval(timerInterval);

      const selectedPairs = shuffleArray(gameData);

      selectedPairs.forEach(pair => {
        correctAnswers[pair.country] = pair.capital;
      });

      elements.countriesList.innerHTML = '';
      elements.capitalsList.innerHTML = '';

      const shuffledCountries = shuffleArray(selectedPairs.map(p => p.country));
      const shuffledCapitals = shuffleArray(selectedPairs.map(p => p.capital));

      shuffledCountries.forEach(country => {
        const countryDiv = document.createElement('div');
        countryDiv.className = 'country-item';
        countryDiv.textContent = country;
        countryDiv.draggable = true;
        countryDiv.dataset.country = country;

        countryDiv.addEventListener('dragstart', function(e) {
          draggedElement = this;
          this.classList.add('dragging');
          e.dataTransfer.effectAllowed = 'move';
          e.dataTransfer.setData('text/plain', country);
        });

        countryDiv.addEventListener('dragend', function() {
          this.classList.remove('dragging');
        });

        elements.countriesList.appendChild(countryDiv);
      });

      shuffledCapitals.forEach(capital => {
        const dropZone = document.createElement('div');
        dropZone.className = 'drop-zone';
        dropZone.textContent = capital;
        dropZone.dataset.capital = capital;

        dropZone.addEventListener('dragover', function(e) {
          e.preventDefault();
          e.dataTransfer.dropEffect = 'move';
          if (!this.classList.contains('correct')) {
            this.classList.add('drag-over');
          }
        });

        dropZone.addEventListener('dragleave', function() {
          this.classList.remove('drag-over');
        });

        dropZone.addEventListener('drop', function(e) {
          e.preventDefault();
          this.classList.remove('drag-over');

          if (!draggedElement || this.classList.contains('correct')) {
            return;
          }

          const countryName = draggedElement.dataset.country;
          const capitalName = this.dataset.capital;

          handleDrop(countryName, capitalName, this);
        });

        elements.capitalsList.appendChild(dropZone);
      });

      updateDisplay();
      startTimer();
    }

    function handleDrop(countryName, capitalName, dropZone) {
      const correctCapital = correctAnswers[countryName];

      if (correctCapital === capitalName) {
        score += 10;
        matchedCount++;
        dropZone.classList.add('correct');
        dropZone.innerHTML = countryName;

        setTimeout(() => {
          const countryItem = Array.from(elements.countriesList.children).find(
            item => item.dataset.country === countryName
          );
          if (countryItem) {
            countryItem.style.transition = 'all 0.3s ease';
            countryItem.style.opacity = '0';
            setTimeout(() => countryItem.remove(), 300);
          }
        }, 500);

        if (matchedCount === Object.keys(correctAnswers).length) {
          endGame();
        }
      } else {
        score = Math.max(0, score - 2);
        dropZone.classList.add('incorrect');
        dropZone.innerHTML = countryName;

        setTimeout(() => {
          dropZone.classList.remove('incorrect');
          dropZone.innerHTML = capitalName;
        }, 500);
      }

      updateDisplay();
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        timeRemaining--;
        updateDisplay();

        if (timeRemaining <= 0) {
          endGame();
        }
      }, 1000);
    }

    function updateDisplay() {
      elements.score.textContent = score;
      elements.timer.textContent = timeRemaining;
    }

    function endGame() {
      clearInterval(timerInterval);
      elements.finalScore.textContent = score;
      elements.gameScreen.classList.add('hidden');
      elements.gameOverScreen.classList.remove('hidden');
    }

    function resetToGame() {
      elements.gameOverScreen.classList.add('hidden');
      elements.gameScreen.classList.remove('hidden');
      initializeGame();
    }

    elements.playAgain.addEventListener('click', resetToGame);

    initializeGame();
  </script>
</body>
</html>
